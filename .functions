# -*- mode: sh -*-
function syu {
    sudo pacman -Syu
}

function rekon {
    curl -s -L rekon.basho.com | sh
}

function cwd2paths {
    export PYTHONPATH=$PYTHONPATH:$(pwd)
}

function collapse_pwd {
    echo $(pwd | sed -e "s,^$HOME,~,")
}

function kill-ports-of-process {
    lsof -n -P -i4 -a -itcp -a -i :$2 -p $1
}

function archnews {
    w3m https://www.archlinux.org/news/ | awk 'NR>17 && NR<30'
}

function execute-dir-local-settings () {
    if [[ -f .dirlocal ]]; then
       ./.dirlocal
    fi
}

function clean-evicted() {
    kubectl delete pods $(kubectl get pods -n $1 | grep Evicted | cut -f1 -d' ' | paste -sd' ' -) -n $1
}

function cd () {
    builtin cd "$@" && execute-dir-local-settings
}

function weather() {
    curl http://v2.wttr.in/KRK
}

function fullspeed-fans() {
    # Would like to sudo echo | tee, but thinkpad_acpi doesn't work
    # like that.
    sudo sh -c 'echo "level full-speed" > /proc/acpi/ibm/fan'
}

function auto-fans() {
    sudo sh -c 'echo "level auto" > /proc/acpi/ibm/fan'
}
